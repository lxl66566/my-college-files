%%---------------------------Student Program---------------------------%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%  LabName:             16QAM调制解调实验
%  Task:                生成自定义长度为5的IQ符号数据比特数据
%                       【1-1i，1+1i,1-3i,3+3i,-3-1i】
%                       根据例程提供的符号映射代码，完成16QAM解符号映射，绘制出
%                       还原后比特数据波形图，并将还原后比特数据输出到示波器
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%---------------------------Student Program End---------------------------%%

% 生成自定义长度为5的IQ符号数据比特数据
custom_symb = [1 - 1i, 1 + 1i, 1 - 3i, 3 + 3i, -3 - 1i];

% 将自定义符号数据转换为比特数据
custom_bit = [];

for i = 1:length(custom_symb)
    % 找到符号在映射表中的位置
    idx = find(tab_16qam == custom_symb(i));
    % 将位置转换为4位二进制数
    bits = dec2bin(idx - 1, 4) - '0';
    % 添加到比特数据中
    custom_bit = [custom_bit bits];
end

% 还原后比特数据波形图
figure
stem(custom_bit);
title('还原后比特数据波形图');
grid on;
